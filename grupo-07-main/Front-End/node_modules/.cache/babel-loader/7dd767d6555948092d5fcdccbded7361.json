{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nahue\\\\LEANDRO\\\\ProyectoIntegradorTerminado\\\\grupo-07-main\\\\Front-End\\\\src\\\\components\\\\Login\\\\LoginForm.js\";\nimport axios from \"axios\";\nimport React, { useContext, useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ReservationContext } from \"../../context/Reservation/ReservationContext\";\nimport { UserContext } from \"../../context/User/UserContext\";\nimport Error from \"../Global/Error\";\n\nconst LoginForm = () => {\n  const navigate = useNavigate();\n  const initialValues = {\n    email: \"\",\n    pass: \"\"\n  };\n  const [formValues, setFormValues] = useState(initialValues);\n  const [formErrors, setFormErrors] = useState({});\n  const [isSubmit, setIsSubmit] = useState(false);\n  const {\n    setUserCredentials\n  } = useContext(UserContext);\n  const {\n    reservationAttempt\n  } = useContext(ReservationContext);\n\n  const changeHandler = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormValues({ ...formValues,\n      [name]: value\n    });\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    setFormErrors(validate(formValues));\n    setIsSubmit(true);\n  };\n\n  useEffect(() => {\n    if (Object.keys(formErrors).length === 0 && isSubmit) {\n      const logUser = async () => {\n        try {\n          const params = new URLSearchParams();\n          params.append(\"email\", formValues.email);\n          params.append(\"password\", formValues.pass);\n          const loggedUserData = await axios.post(`http://54.176.81.27:8080/login`, params);\n          const newToken = await loggedUserData.data.access_token;\n          localStorage.setItem(\"token\", newToken);\n          setUserCredentials(true);\n          navigate(\"/\");\n        } catch (error) {\n          console.log(error);\n        }\n      };\n\n      logUser();\n    }\n  }, [formErrors]);\n\n  const validate = values => {\n    const errors = {};\n\n    if (!values.email) {\n      errors.email = \"El email es requerido\";\n    }\n\n    if (!values.pass) {\n      errors.pass = \"La contraseña es requerida\";\n    }\n\n    return errors;\n  };\n\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"loginForm--container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"loginForm--form\",\n    onSubmit: submitHandler,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, reservationAttempt && /*#__PURE__*/React.createElement(Error, {\n    message: \"Para realizar una reserva debes de estar logueado\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Iniciar Sesi\\xF3n\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"E-mail\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    value: formValues.email,\n    onChange: changeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: \"errors\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, formErrors.email), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, \"Contrase\\xF1a\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"pass\",\n    value: formValues.pass,\n    onChange: changeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: \"errors\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, formErrors.pass), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"loginForm--form-button primary-button\",\n    type: \"submit\",\n    onClick: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Iniciar Sesi\\xF3n\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginForm--form-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, \"\\xBFNo estas registrado?\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"link\",\n    onClick: () => navigate(\"/signup\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"Entra aqu\\xED\")), /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, \"Al hacer clic en el bot\\xF3n Iniciar Sesi\\xF3n, acepta nuestros T\\xE9rminos y Condiciones\"))));\n};\n\nexport default LoginForm;","map":{"version":3,"names":["axios","React","useContext","useEffect","useState","useNavigate","ReservationContext","UserContext","Error","LoginForm","navigate","initialValues","email","pass","formValues","setFormValues","formErrors","setFormErrors","isSubmit","setIsSubmit","setUserCredentials","reservationAttempt","changeHandler","e","name","value","target","submitHandler","preventDefault","validate","Object","keys","length","logUser","params","URLSearchParams","append","loggedUserData","post","newToken","data","access_token","localStorage","setItem","error","console","log","values","errors"],"sources":["C:/Users/nahue/LEANDRO/ProyectoIntegradorTerminado/grupo-07-main/Front-End/src/components/Login/LoginForm.js"],"sourcesContent":["import axios from \"axios\";\nimport React, { useContext, useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ReservationContext } from \"../../context/Reservation/ReservationContext\";\nimport { UserContext } from \"../../context/User/UserContext\";\nimport Error from \"../Global/Error\";\n\nconst LoginForm = () => {\n\n  const navigate = useNavigate();\n  const initialValues = { email: \"\", pass: \"\" };\n  const [formValues, setFormValues] = useState(initialValues);\n  const [formErrors, setFormErrors] = useState({});\n  const [isSubmit, setIsSubmit] = useState(false);\n\n\n  const {setUserCredentials} = useContext(UserContext);\n  const {reservationAttempt} = useContext(ReservationContext)\n\n\n\n  const changeHandler = (e) => {\n    const { name, value } = e.target;\n    setFormValues({ ...formValues, [name]: value });\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    setFormErrors(validate(formValues)); \n    setIsSubmit(true);\n  };\n\n\n  useEffect(() => {\n    if (Object.keys(formErrors).length === 0 && isSubmit) {\n      const logUser = async () => {\n        try {\n        const params = new URLSearchParams();\n        params.append(\"email\", formValues.email);\n        params.append(\"password\", formValues.pass);\n        \n        const loggedUserData = await axios.post(`http://54.176.81.27:8080/login`, params);\n        const newToken = await loggedUserData.data.access_token;\n        localStorage.setItem(\"token\", newToken);\n        setUserCredentials(true);\n        navigate(\"/\");\n        } catch (error) {\n          console.log(error);\n        }\n      };\n\n      logUser()\n    }\n  },[formErrors])\n\n\n  const validate = (values) => {\n    const errors = {};\n\n    if (!values.email) {\n      errors.email = \"El email es requerido\";\n    } \n\n    if (!values.pass) {\n      errors.pass = \"La contraseña es requerida\";\n    } \n  \n    return errors;\n  };\n\n  return (\n    <section className=\"loginForm--container\">\n      <form className=\"loginForm--form\" onSubmit={submitHandler} noValidate>\n        {reservationAttempt && (\n          <Error message={\"Para realizar una reserva debes de estar logueado\"} />\n        )}\n        <h1 className=\"center\">Iniciar Sesión</h1>\n        <label>E-mail</label>\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={formValues.email}\n          onChange={changeHandler}\n        />\n        <small className=\"errors\">{formErrors.email}</small>\n        <label>Contraseña</label>\n        <input\n          type=\"password\"\n          name=\"pass\"\n          value={formValues.pass}\n          onChange={changeHandler}\n        />\n        <small className=\"errors\">{formErrors.pass}</small>\n        <button\n          className=\"loginForm--form-button primary-button\"\n          type=\"submit\"\n          onClick={submitHandler}\n        >\n          Iniciar Sesión\n        </button>\n        <div className=\"loginForm--form-info\">\n          <p>\n            ¿No estas registrado?{\" \"}\n            <span className=\"link\" onClick={() => navigate(\"/signup\")}>\n              Entra aquí\n            </span>\n          </p>\n          <small>\n            Al hacer clic en el botón Iniciar Sesión, acepta nuestros Términos y\n            Condiciones\n          </small>\n        </div>\n      </form>\n    </section>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}